<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Input Form</title>
    <style>
        /* 기본 스타일 설정 */
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
        }

        .form-group input {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
        }

        .form-group button {
            padding: 10px 20px;
        }
    </style>
</head>

<body>
    <h1>행 추가</h1>
    <!-- 각 입력 필드와 레이블을 포함하는 form-group -->
    <div class="form-group">
        <label for="plan-date">계획날짜</label>
        <input type="date" id="plan-date">
    </div>
    <div class="form-group">
        <label for="product-name">제품명</label>
        <input type="text" id="product-name">
    </div>
    <div class="form-group">
        <label for="material">원료</label>
        <input type="text" id="material">
    </div>
    <div class="form-group">
        <label for="current-stock">현재고</label>
        <input type="text" id="current-stock">
    </div>
    <div class="form-group">
        <label for="plan-quantity">계획 수량</label>
        <input type="text" id="plan-quantity">
    </div>
    <div class="form-group">
        <label for="price">단가</label>
        <input type="text" id="price">
    </div>
    <div class="form-group">
        <label for="order-company">발주처</label>
        <input type="text" id="order-company">
    </div>
    <div class="form-group">
        <label for="work-location">작업위치</label>
        <input type="text" id="work-location">
    </div>
    <div class="form-group">
        <label for="author">작성자</label>
        <input type="text" id="author">
    </div>
    <div class="form-group">
        <label for="approver">승인자</label>
        <input type="text" id="approver">
    </div>
    <div class="form-group">
        <!-- 저장 버튼 -->
        <button id="save-btn">저장</button>
    </div>

    <script>
        // "저장" 버튼을 클릭하면 입력된 데이터를 수집하고 localStorage에 저장합니다.
        document.getElementById('save-btn').addEventListener('click', function () {
            const planDate = document.getElementById('plan-date').value;
            const productName = document.getElementById('product-name').value;
            const material = document.getElementById('material').value;
            const currentStock = document.getElementById('current-stock').value;
            const planQuantity = document.getElementById('plan-quantity').value;
            const price = document.getElementById('price').value;
            const orderCompany = document.getElementById('order-company').value;
            const workLocation = document.getElementById('work-location').value;
            const author = document.getElementById('author').value;
            const approver = document.getElementById('approver').value;

            // 기존의 localStorage 데이터를 가져오고 새로운 데이터를 추가합니다.
            let tableData = localStorage.getItem('tableData') ? JSON.parse(localStorage.getItem('tableData')) : [];
            const newRank = tableData.length + 1;  // 자동으로 순위를 증가시킵니다.
            const newRow = [
                `<input type="checkbox">`,
                newRank,
                planDate,
                productName,
                material,
                currentStock,
                planQuantity,
                price,
                orderCompany,
                workLocation,
                author,
                approver
            ];

            tableData.push(newRow);
            localStorage.setItem('tableData', JSON.stringify(tableData));

            // 부모 창을 새로고침하여 테이블을 업데이트하고 현재 창을 닫습니다.
            window.opener.location.reload();
            window.close();
        });
    </script>
</body>

</html>
